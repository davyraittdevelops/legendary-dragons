<div class="container-fluid text-center">

  <div class="text-center mt-3" *ngIf="(isLoading$ | async); else deck">
    <span class="spinner-border spinner-border mt-3 deck-loading-spinner" role="status" aria-hidden="true"></span>
  </div>

  <div *ngIf="hasError$ | async" class="text-danger" class="alert alert-warning" role="alert">
    An error has occured while loading your deck. Please try again.
  </div>

  <ng-template #deck>
    <ng-container *ngIf="selectedDeck$ | async as selectedDeck">
      <!-- Row 1  -->
      <div class="row mt-3">
        <div class="col col-6 text-center">
          <h1 class="fs-2 fw-bold">{{ selectedDeck.deck_name }}</h1>
          <p class="fs-3">
            {{selectedDeck.deck_cards.length + selectedDeck.side_deck_cards.length}} cards
          </p>
          <em class="fs-4 mt-2">{{0 | currency }}</em>
        </div>
        <!--    For chart diagram    -->
        <div class="col col-6 text-center"></div>
        <app-add-card-to-deck></app-add-card-to-deck>
      </div>

      <!-- Row 2  -->
      <div class="row mt-3">
        <div class="col col-6 text-center">
          <h1 class="fs-2 bg-dark mb-0 p-3 rounded-top">Deck</h1>
          <cdk-virtual-scroll-viewport appendOnly itemSize="50" class="deck-viewport border border-2 border-light rounded-bottom shadow border-top-0 bg-dark bg-opacity-50" style="--bs-border-opacity: .5;">
            <div class="card-position">
              <div class="row">
                <app-deck-cards-details-page *ngFor="let card of selectedDeck.deck_cards" [card]="card" class="col">
                </app-deck-cards-details-page>
              </div>
            </div>
          </cdk-virtual-scroll-viewport>
        </div>


        <div class="col col-6 text-center">
          <h1 class="fs-2 bg-dark mb-0 p-3 rounded-top">Side Deck</h1>
          <cdk-virtual-scroll-viewport appendOnly itemSize="50" class="deck-viewport border border-2 border-light rounded-bottom shadow border-top-0 bg-dark bg-opacity-50" style="--bs-border-opacity: .5;">
            <div class="card-position">
              <app-deck-cards-details-page class="col" *ngFor="let card of selectedDeck.side_deck_cards" [card]="card">
              </app-deck-cards-details-page>
            </div>
          </cdk-virtual-scroll-viewport>
        </div>
      </div>

      <!-- Row 3  -->
      <div class="row latest-row-margin"></div>
    </ng-container>
  </ng-template>

</div>
